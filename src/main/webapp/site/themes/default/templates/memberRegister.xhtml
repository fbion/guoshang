<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:archer="http://java.sun.com/jsf/archer"
      xmlns:sec="http://www.springframework.org/security/facelets/tags">

<f:metadata>
    <f:viewParam name="referrer" value="#{userHome.instance.referrer}"></f:viewParam>
</f:metadata>

<ui:param name="path" value="#{request.contextPath}"></ui:param>

<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
            <meta name="renderer" content="webkit"/>
            <title>#{siteVars.siteName}</title>
        </f:facet>
        <h:outputScript library="primefaces" name="jquery/jquery.js"
                        target="head"/>
        <script type="text/javascript"
                src="#{tplVars.themeJSPath}/jquery.artDialog.js?skin=idialog"></script>
        <script type="text/javascript"
                src="#{tplVars.themeJSPath}/jquery.SuperSlide.2.1.1.js"></script>
        <script type="text/javascript" src="#{tplVars.themeJSPath}/common.js"></script>
        <script type="text/javascript" src="#{tplVars.themeJSPath}/timer.js"></script>
        <link type="text/css" rel="stylesheet"
              href="#{tplVars.themeStylePath}/common.css"/>
        <link type="text/css" rel="stylesheet"
              href="#{tplVars.themeStylePath}/login.css"/>
    </h:head>
    <h:body style="background:#f3f3f3;">
        <archer:archerMessages focus="false" showGlobalMessages="true"
                               severity="0,2"></archer:archerMessages>
        <div class="top">
            <div class="top_main">
                <div class="top_main_left">
                    <div class="top_logo">
                        <a href="#{path}/"><img src="#{tplVars.themeImagePath}/logo.png" /></a>
                    </div>
                    <div class="top_line">
                        <img src="#{tplVars.themeImagePath}/line04.png" />
                    </div>
                    <div class="top_wel"><p>免费注册</p></div>
                </div>

                <div class="top_main_right">
                    <div class="top_zi">
                        <a href="#{path}/about">关于易贷</a>
                    </div>
                    <div class="top_zi">
                        <p>|</p>
                    </div>
                    <div class="top_zi">
                        <a href="#{path}/">首页</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="login" style="margin-top: 30px;">
            <div class="login_l login_l01">
                <h:form id="form">
                    <archer:validateEqual id="rePasswordValidator" components="pass repass"
                                          showMessageFor="@all" message="两次输入密码不一致"></archer:validateEqual>
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>用户名：</div>
                        <div class="login_box_r">
                            <h:inputText id="username" label="用户名" required="true"
                                         styleClass="login_txt" maxlength="16"
                                         value="#{userHome.instance.username}">
                                <archer:validateInputRule ruleId="input.username"></archer:validateInputRule>
                                <f:ajax event="blur"></f:ajax>
                                <archer:validateAlreadyExist/>
                            </h:inputText>
                            <p:watermark value="5至16位字符，请勿使用手机号" for="username"></p:watermark>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>登录密码：</div>
                        <div class="login_box_r">
                            <h:inputSecret id="pass" label="密码" required="true"
                                           styleClass="login_txt login_txt02" maxlength="16"
                                           value="#{userHome.instance.password}">
                                <f:ajax event="blur" execute="@this rePasswordValidator"></f:ajax>
                                <archer:validateInputRule ruleId="input.password"></archer:validateInputRule>
                            </h:inputSecret>
                            <p:watermark value="6至16位字母和数字组合" for="pass"></p:watermark>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>确认密码：</div>
                        <div class="login_box_r">
                            <h:inputSecret id="repass" required="true" maxlength="16"
                                           styleClass="login_txt login_txt02" label="确认密码">
                                <f:ajax event="blur" execute="@this pass rePasswordValidator"></f:ajax>
                            </h:inputSecret>
                            <p:watermark value="再次输入密码" for="repass"></p:watermark>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <!--<div class="login_box login_box01">-->
                    <!--<div class="login_box_l login_box_l01">邮箱：</div>-->
                    <!--<div class="login_box_r">-->
                    <!--<h:inputText id="email1" label="邮箱" rendered="#{configHome.getConfigValue('ipspay_enable') == '1'}"-->
                    <!--styleClass="login_txt login_txt05" maxlength="100"-->
                    <!--value="#{userHome.instance.email}" required="true">-->
                    <!--<archer:validateInputRule ruleId="input.email"></archer:validateInputRule>-->
                    <!--<archer:validateAlreadyExist />-->
                    <!--<f:ajax event="blur"></f:ajax>-->
                    <!--</h:inputText>-->
                    <!--<h:inputText id="email2" label="邮箱" rendered="#{configHome.getConfigValue('ipspay_enable') != '1'}"-->
                    <!--styleClass="login_txt login_txt05" maxlength="100"-->
                    <!--value="#{userHome.instance.email}">-->
                    <!--<archer:validateInputRule ruleId="input.email"></archer:validateInputRule>-->
                    <!--<archer:validateAlreadyExist />-->
                    <!--<f:ajax event="blur"></f:ajax>-->
                    <!--</h:inputText>-->
                    <!--<p:watermark value="请输入真实邮箱，用来开户" for="email1"></p:watermark>-->
                    <!--<p:watermark value="请输入邮箱" for="email2"></p:watermark>-->
                    <!--</div>-->
                    <!--<div class="clear"></div>-->
                    <!--</div>-->
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>手机号码：</div>
                        <div class="login_box_r">
                            <h:inputText id="mobileNumber" maxlength="11" label="手机号"
                                         value="#{userHome.instance.mobileNumber}"
                                         styleClass="login_txt login_txt06" required="true">
                                <archer:validateInputRule ruleId="input.mobile"></archer:validateInputRule>
                                <archer:validateAlreadyExist/>
                                <f:ajax event="blur"></f:ajax>
                            </h:inputText>
                            <p:watermark value="请输入手机号码" for="mobileNumber"></p:watermark>
                        </div>
                        <div class="clear"></div>
                    </div>


                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>图形验证码：</div>
                        <div class="login_box_r">
                            <h:inputText id="captcha_input"   label="图形验证码"  required="true" value="#{userHome.captchaCode}" maxlength="4"
                                         styleClass="login_txt login_txt03"></h:inputText>
                            <p:watermark value="请输入验证码" for="captcha_input"></p:watermark>
                            <a class="login_yzm" href="javascript:void(0)"><img
                                    alt="点击刷新" id="verifyCode"
                                    src="#{request.contextPath}/verifyCodeServlet"
                                    onclick="this.src='#{request.contextPath}/verifyCodeServlet?'+new Date().getTime()"/></a>
                        </div>
                        <div class="clear"></div>
                    </div>


                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"><font color="red">*&#160;</font>手机验证码：</div>
                        <div class="login_box_r">
                            <h:inputText id="captcha" label="验证码" maxlength="6"
                                         required="true" styleClass="login_txt login_txt03"
                                         value="#{userHome.authCode}">
                                <f:ajax event="blur"></f:ajax>
                            </h:inputText>
                            <p:watermark value="请输入手机验证码" for="captcha"></p:watermark>
                            <h:commandButton value="获取短信" id="sendAuthCodeBtn"
                                             onclick="$(this).attr('disabled','disabled')"
                                             style="border: none;width: 100px;" styleClass="hqyzm pointer">
                                <f:ajax execute="mobileNumber captcha_input" onevent="enableBtn('form\\\\:sendAuthCodeBtn')"
                                        listener="#{userHome.sendRegisterAuthCodeToMobileVaiCode(userHome.instance.mobileNumber,userHome.captchaCode, 'timerCountB(\'form\\\\:sendAuthCodeBtn\')')}"></f:ajax>
                            </h:commandButton>
                        </div>
                        <div class="clear"></div>
                    </div>


                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01">推荐人：</div>
                        <div class="login_box_r">
                            <h:inputText id="referrer" maxlength="50" label="推荐人"
                                         value="#{userHome.instance.referrer}" styleClass="login_txt">
                                <!-- 								<archer:validateAlreadyExist entityClass="com.esoft.archer.user.model.User" fieldName="username" isValidateNotExist="true"></archer:validateAlreadyExist> -->
                                <!-- 								<f:ajax event="blur"></f:ajax> -->
                            </h:inputText>
                            <p:watermark value="请输入推荐人用户名或手机号" for="referrer"></p:watermark>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"></div>
                        <div class="login_box_r">
                            <p class="yhm">
                                <h:selectBooleanCheckbox id="agree" selected="true"
                                                         requiredMessage="请阅读并同意《网站服务协议》!">
                                    <f:validator validatorId="omnifaces.RequiredCheckboxValidator"/>
                                    <f:ajax event="click"></f:ajax>
                                </h:selectBooleanCheckbox>
                                我已经阅读并同意 <a href="#{path}/node/spage/registerService"
                                            target="_blank">《网站服务协议》</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="login_box login_box01">
                        <div class="login_box_l login_box_l01"></div>
                        <div class="login_box_r">
                            <p:commandLink value="立即注册" styleClass="login_btn"
                                           action="#{userHome.registerByMobileNumber}">
                                <f:ajax listener="#{userHome.setIsLoginAfterRegister(true)}"></f:ajax>
                            </p:commandLink>
                        </div>
                        <div class="clear"></div>
                    </div>
                </h:form>
                <!--<div class="login_box login_box01">-->
                    <!--<div class="login_box_l login_box_l01"></div>-->
                    <!--<div class="login_box_r">-->
                        <!--<p class="dl">-->
                            <!--使用合作网站账户登录：<br/> <a href="#"><img-->
                                <!--src="#{tplVars.themeImagePath}/img54.png"/></a>腾讯QQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a-->
                                <!--href="#"><img src="#{tplVars.themeImagePath}/img55.png"/></a>新浪微博-->
                        <!--</p>-->
                    <!--</div>-->
                    <!--<div class="clear"></div>-->
                <!--</div>-->
            </div>
            <div class="login_r login_r02" style="width: 600px;">
                <p class="log" style="float: right;">
                    已有账号？| <a href="#{path}/memberLoginPage">立即登录</a>
                </p>
                <img src="#{tplVars.themeImagePath}/img56.png"/>
            </div>
            <div class="clear"></div>
        </div>
    </h:body>
</f:view>
</html>
